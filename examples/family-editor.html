<!doctype html>
<html data-reactid=".53yo9rwnwg" data-react-checksum="-681044505"><head data-reactid=".53yo9rwnwg.0"><title data-reactid=".53yo9rwnwg.0.0">React Forms</title><link rel="stylesheet" href="&#x2f;react-forms&#x2f;styles&#x2f;index.css" data-reactid=".53yo9rwnwg.0.1"></head><body title="React Forms" data-reactid=".53yo9rwnwg.1"><nav class="NavigationBar navbar navbar-default navbar-fixed-top" role="navigation" data-reactid=".53yo9rwnwg.1.0"><div class="container-fluid" data-reactid=".53yo9rwnwg.1.0.0"><div class="navbar-header" data-reactid=".53yo9rwnwg.1.0.0.0"><a class="navbar-brand" href="&#x2f;react-forms&#x2f;" data-reactid=".53yo9rwnwg.1.0.0.0.0">React Forms</a></div><div class="collapse navbar-collapse" data-reactid=".53yo9rwnwg.1.0.0.1"><ul class="nav navbar-nav" data-reactid=".53yo9rwnwg.1.0.0.1.0"><li class="dropdown" data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;"><a class="dropdown-toggle" href="&#x2f;react-forms&#x2f;documentation&#x2f;" data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.0"><span data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.0.0">Documentation</span><span data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.0.1"> </span><b class="caret" data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.0.2"></b></a><ul class="dropdown-menu" data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.1"><li data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.1.$documentation&#x2f;__documentation&#x2f;"><a href="&#x2f;react-forms&#x2f;documentation&#x2f;" data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.1.$documentation&#x2f;__documentation&#x2f;.0">Overview</a></li><li data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.1.$documentation&#x2f;__documentation&#x2f;schema=1html"><a href="&#x2f;react-forms&#x2f;documentation&#x2f;schema.html" data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.1.$documentation&#x2f;__documentation&#x2f;schema=1html.0">Schemas and validation</a></li><li data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.1.$documentation&#x2f;__documentation&#x2f;customizations=1html"><a href="&#x2f;react-forms&#x2f;documentation&#x2f;customizations.html" data-reactid=".53yo9rwnwg.1.0.0.1.0.$documentation&#x2f;.1.$documentation&#x2f;__documentation&#x2f;customizations=1html.0">Customizations</a></li></ul></li><li class="dropdown" data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html"><a class="dropdown-toggle" href="&#x2f;react-forms&#x2f;examples&#x2f;family-editor.html" data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.0"><span data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.0.0">Examples</span><span data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.0.1"> </span><b class="caret" data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.0.2"></b></a><ul class="dropdown-menu" data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.1"><li data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.1.$examples&#x2f;family-editor=1html__examples&#x2f;family-editor=1html"><a href="&#x2f;react-forms&#x2f;examples&#x2f;family-editor.html" data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.1.$examples&#x2f;family-editor=1html__examples&#x2f;family-editor=1html.0">Family editor form</a></li><li data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.1.$examples&#x2f;family-editor=1html__examples&#x2f;array-editor=1html"><a href="&#x2f;react-forms&#x2f;examples&#x2f;array-editor.html" data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.1.$examples&#x2f;family-editor=1html__examples&#x2f;array-editor=1html.0">Array editor form</a></li><li data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.1.$examples&#x2f;family-editor=1html__examples&#x2f;sortable-list=1html"><a href="&#x2f;react-forms&#x2f;examples&#x2f;sortable-list.html" data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.1.$examples&#x2f;family-editor=1html__examples&#x2f;sortable-list=1html.0">Sortable list</a></li><li data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.1.$examples&#x2f;family-editor=1html__examples&#x2f;undo=1html"><a href="&#x2f;react-forms&#x2f;examples&#x2f;undo.html" data-reactid=".53yo9rwnwg.1.0.0.1.0.$examples&#x2f;family-editor=1html.1.$examples&#x2f;family-editor=1html__examples&#x2f;undo=1html.0">Form with undo stack</a></li></ul></li><li data-reactid=".53yo9rwnwg.1.0.0.1.0.$api=1html"><a href="&#x2f;react-forms&#x2f;api.html" data-reactid=".53yo9rwnwg.1.0.0.1.0.$api=1html.0">API</a></li></ul><div class="navbar-repo" data-reactid=".53yo9rwnwg.1.0.0.1.1"><a href="https:&#x2f;&#x2f;github.com&#x2f;prometheusresearch&#x2f;react-forms" data-reactid=".53yo9rwnwg.1.0.0.1.1.0"><span data-reactid=".53yo9rwnwg.1.0.0.1.1.0.0">React Forms</span><span data-reactid=".53yo9rwnwg.1.0.0.1.1.0.1"> on GitHub â†’</span></a></div></div></div></nav><div class="wrapper" data-reactid=".53yo9rwnwg.1.1"><div class="ExampleDownload container" data-reactid=".53yo9rwnwg.1.1.0"><a href="https:&#x2f;&#x2f;github.com&#x2f;prometheusresearch&#x2f;react-forms&#x2f;blob&#x2f;master&#x2f;docs&#x2f;contents&#x2f;scripts&#x2f;examples&#x2f;family-editor.jsx" data-reactid=".53yo9rwnwg.1.1.0.0">See example code</a></div><div class="Content container" data-reactid=".53yo9rwnwg.1.1.1"><h1 id="family-form-example">Family form example</h1>
<p>This example showcases several aspects of React Forms library, most notably
defining <strong>reusable schemas</strong>, creating <strong>custom fieldset components</strong> and
custom input components for <strong>user input formatting</strong>.</p>
<p>The example form is a form for entering information about family.</p>
<div id="example"></div>

<h2 id="implementation">Implementation</h2>
<h4 id="schema">Schema</h4>
<p>We start with defining schemas for commonly used fields.</p>
<h5 id="sexfield">SexField</h5>
<p><code>SexField</code> represents sex of a person. We want to use a radio button group as an
input component for this type of values.</p>
<pre><code>var RadioButtonGroup = ReactForms.input.RadioButtonGroup

function SexField(props) {
  props = props || {}
  var options = [
    {value: &#39;male&#39;, name: &#39;Male&#39;},
    {value: &#39;female&#39;, name: &#39;Female&#39;}
  ]
  return (
    &lt;Property
      name={props.name || &#39;sex&#39;}
      label={props.label || &#39;Sex&#39;}
      required={props.required}
      input={&lt;RadioButtonGroup options={options} /&gt;}
      /&gt;
  )
}
</code></pre><p>After that we can use this field in a different schemas <code>&lt;SexField name=&quot;sex&quot;
/&gt;</code>. Note how we provide a default values for <code>name</code> and <code>label</code>.</p>
<h5 id="namefield">NameField</h5>
<p>Now let&#39;s define a schema for fields which represent a name of a person. We want
to autoformat name so it appears capitalized and we want to perform additional
validation on name value so it cannot contain number or any other non-letters.</p>
<p>First we define a validator:</p>
<pre><code>function validateName(v) {
  return /^[a-z\s]+$/i.test(v)
}
</code></pre><p>Now we can use it in schema definition:</p>
<pre><code>function NameField(props) {
  props = props || {}
  return (
    &lt;Property
      name={props.name || &#39;name&#39;}
      label={props.label || &#39;Name&#39;}
      hint=&quot;Should contain only alphanumeric characters&quot;
      input={&lt;NameInput /&gt;}
      validate={validateName}
      /&gt;
  )
}
</code></pre><p>Note that we referenced the <code>&lt;NameInput /&gt;</code> component. This the thin wrapper on
for <code>&lt;input type=&quot;text&quot; /&gt;</code> which autoformats user input by capitalizing it.</p>
<h5 id="dateofbirthfield">DateOfBirthField</h5>
<p><code>DateOfBirthField</code> is define similar to previous fields:</p>
<pre><code>function DateOfBirthField(props) {
  props = props || {}
  return (
    &lt;Property
      name={props.name || &#39;dob&#39;}
      label={props.label || &#39;Date of Birth&#39;}
      hint=&quot;Should be in YYYY-MM-DD format&quot;
      type=&quot;date&quot;
      /&gt;
  )
}
</code></pre><h5 id="adult-and-child">Adult and Child</h5>
<p>Now we can define schemas for adults and children, both using already defined
<code>NameField</code>, <code>DateOfBirthField</code> and <code>SexField</code>.</p>
<p>Note the <code>component</code> property of <code>Child</code> schema what defines which fieldset
component should be used to render schemas of such type. We will show how to
define <code>ChildFieldset</code> below.</p>
<pre><code>function Adult(props) {
  props = props || {}
  return (
    &lt;Schema label={props.label} name={props.name}&gt;
      &lt;NameField /&gt;
      &lt;DateOfBirthField /&gt;
    &lt;/Schema&gt;
  )
}

function Child(props) {
  props = props || {}
  return (
    &lt;Schema component={ChildFieldset} name={props.name}&gt;
      &lt;NameField /&gt;
      &lt;DateOfBirthField /&gt;
      &lt;SexField required /&gt;
      &lt;Property
        label=&quot;Female specific value&quot;
        name=&quot;femaleSpecificValue&quot; /&gt;
      &lt;Property
        label=&quot;Male specific value&quot;
        name=&quot;maleSpecificValue&quot; /&gt;
    &lt;/Schema&gt;
  )
}
</code></pre><h5 id="family">Family</h5>
<p>Finally the schema for family would look like a composition of schema types we
defined previously.</p>
<p>Note how we have defined <code>Children</code> as a list of <code>Child</code>. That describes that a
family can have multiple children and form would have a corresponding UI
controls to add and remove children records.</p>
<pre><code>function Family(props) {
  return (
    &lt;Schema name={props.name}&gt;
      &lt;Adult name=&quot;mother&quot; label=&quot;Mother&quot; /&gt;
      &lt;Adult name=&quot;father&quot; label=&quot;Father&quot; /&gt;
      &lt;List label=&quot;Children&quot; name=&quot;children&quot;&gt;
        &lt;Child /&gt;
      &lt;/List&gt;
    &lt;/Schema&gt;
  )
}
</code></pre><h4 id="custom-input-component-for-name-formatting">Custom input component for name formatting</h4>
<p>Now let&#39;s define <code>&lt;NameInput /&gt;</code> component which is used by <code>NameField</code> field to
capitalize user input automatically.</p>
<pre><code>var NameInput = React.createClass({

  getInitialState: function() {
    return {selection: {start: 0, end: 0}}
  },

  onChange: function(e) {
    var value = e.target.value
    var node = this.getDOMNode()
    this.setState({
      selection: {start: node.selectionStart, end: node.selectionEnd}
    })
    this.props.onChange(value)
  },

  componentDidUpdate: function() {
    var node = this.getDOMNode()
    if (document.activeElement === node) {
      node.setSelectionRange(this.state.selection.start, this.state.selection.end)
    }
  },

  format: function(value) {
    return value.split(/\s+/)
      .map(function(s) { return s.charAt(0).toUpperCase() + s.slice(1) })
      .join(&#39; &#39;)
  },

  render: function() {
    var value = this.format(this.props.value)
    return this.transferPropsTo(
      &lt;input
        type=&quot;text&quot;
        value={value}
        onChange={this.onChange} /&gt;
    )
  }
})
</code></pre><p>It is a little verbose because we need to take care of cursor position in input
box. But other than that it is a thin wrapper for <code>&lt;input type=&quot;text&quot; /&gt;</code> which
just capitalizes every word in a value.</p>
<h4 id="custom-fieldset-component-for-child">Custom fieldset component for Child</h4>
<p>Now we define <code>ChildFieldset</code> component which is used to render values described
with <code>Child</code> schema. The reason we want to do this is that we want to show a
different set of fields based on a sex of a child.</p>
<p>Note that creating a fieldset component reduces down to using <code>FieldsetMixin</code>
mixin and defining <code>render()</code> method.</p>
<p><code>FieldsetMixin</code> provides <code>valueLens()</code> method which allows accessing a current form
value for this particular schema node via <code>valueLens().val()</code>.</p>
<p>To render its fields <code>ChildFieldset</code> component uses a <code>FormFor</code> component which
automatically receives a corresponding schema and value based on its <code>name</code>
property.</p>
<pre><code>var ChildFieldset = React.createClass({
  mixins: [ReactForms.FieldsetMixin],

  render: function() {
    var sex = this.valueLens().val().sex
    return this.transferPropsTo(
      &lt;div className=&quot;react-forms-fieldset&quot;&gt;
        &lt;FormFor name=&quot;name&quot; /&gt;
        &lt;FormFor name=&quot;dob&quot; /&gt;
        &lt;FormFor name=&quot;sex&quot; /&gt;
        {sex === &#39;male&#39; &amp;&amp;
          &lt;FormFor name=&quot;maleSpecificValue&quot; /&gt;}
        {sex === &#39;female&#39; &amp;&amp;
          &lt;FormFor name=&quot;femaleSpecificValue&quot; /&gt;}
      &lt;/div&gt;
    )
  }
})
</code></pre><h4 id="rendering-forms">Rendering forms</h4>
<p>Finally we can render our <em>Family form</em> by simply using <code>Form</code> component with
out <code>Family</code> schema.</p>
<pre><code>&lt;Form schema={&lt;Family /&gt;} /&gt;
</code></pre></div></div><script src="&#x2f;react-forms&#x2f;scripts&#x2f;react.js" data-reactid=".53yo9rwnwg.1.2"></script><script src="&#x2f;react-forms&#x2f;scripts&#x2f;react-forms.js" data-reactid=".53yo9rwnwg.1.3"></script><script src="&#x2f;react-forms&#x2f;scripts&#x2f;ShowValue.js" data-reactid=".53yo9rwnwg.1.4:$0"></script><script src="&#x2f;react-forms&#x2f;scripts&#x2f;examples&#x2f;family-editor.js" data-reactid=".53yo9rwnwg.1.4:$1"></script></body></html>